<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Time Teams</title>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    background-color: #71A95A; /* Green like Wrigley Field grass */
    font-family: Arial, sans-serif;
  }
  .container {
    margin-top: 20px;
    background-color: #FAFAD2; /* Sand color */
    padding: 20px;
    border-radius: 10px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background-color: #FAFAD2; /* Sand color */
  }
  th, td {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
  }
  th {
    background-color: #f2f2f2; /* Light gray header */
  }
  .stat-square {
    width: 30px;
    height: 30px;
    background-color: #ffffff; /* White square */
    border: 1px solid #dddddd;
  }
</style>
</head>
<body>

<div class="container">
  <div class="d-flex justify-content-between align-items-center">
    <h2>All Time Teams</h2>
    <button type="button" class="btn btn-primary" id="instructionsButton">Instructions</button>
  </div>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th id="teamLabel"></th>
        <th>Position</th>
        <th id="statLabel">Stat</th> <!-- New column for Stat -->
        <th>Submit Player</th> <!-- New column for submit button -->
      </tr>
    </thead>
    <tbody id="playerRows">
      <!-- Table rows will be generated dynamically -->
    </tbody>
  </table>

  <!-- Total Score -->
  <div>
    <p>Total Score: <span id="totalScore"></span></p>
  </div>
</div>

<!-- Instructions Modal -->
<div class="modal fade" id="instructionsModal" tabindex="-1" role="dialog" aria-labelledby="instructionsModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="instructionsModalLabel">Instructions</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Build an All Time Team! Choose a player who played for the given team and position. The score will be that player's highest season stat total for that category. Your total score is the sum of all the players' scores. Have fun!</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
var teams = [
  "Arizona Diamondbacks", "Atlanta Braves", "Baltimore Orioles", "Boston Red Sox",
  "Chicago White Sox", "Chicago Cubs", "Cincinnati Reds", "Cleveland Guardians",
  "Colorado Rockies", "Detroit Tigers", "Houston Astros", "Kansas City Royals",
  "Los Angeles Angels of Anaheim", "Los Angeles Dodgers", "Miami Marlins", "Milwaukee Brewers",
  "Minnesota Twins", "New York Yankees", "New York Mets", "Oakland Athletics",
  "Philadelphia Phillies", "Pittsburgh Pirates", "San Diego Padres", "San Francisco Giants",
  "Seattle Mariners", "St. Louis Cardinals", "Tampa Bay Rays", "Texas Rangers",
  "Toronto Blue Jays", "Washington Nationals"
];

var stats = ["r", "h", "2b", "3b", "hr", "rbi", "sb", "bb", "ibb"]; //add additional stats here

function updateLabels() {
  var randomTeamIndex = Math.floor(Math.random() * teams.length);
  var randomTeam = teams[randomTeamIndex];

  var randomStatIndex = Math.floor(Math.random() * stats.length);
  var randomStat = stats[randomStatIndex];

  var baseUrl = window.location.protocol + '//' + window.location.hostname;

  var xhrTeam = new XMLHttpRequest();
  xhrTeam.open('GET', baseUrl + '/randomTeam', true);
  xhrTeam.onload = function () {
    if (xhrTeam.status === 200) {
      randomTeam = xhrTeam.responseText;
      document.getElementById('teamLabel').innerText = randomTeam;
    } else {
      console.error('Error fetching random team:', xhrTeam.statusText);
    }
  };
  xhrTeam.onerror = function () {
    console.error('Error fetching random team.');
  };
  xhrTeam.send();

  var xhrStat = new XMLHttpRequest();
  xhrStat.open('GET', baseUrl + '/randomStat', true);
  xhrStat.onload = function () {
    if (xhrStat.status === 200) {
      randomStat = xhrStat.responseText;
      document.getElementById('statLabel').innerText = randomStat;
    } else {
      console.error('Error fetching random stat:', xhrStat.statusText);
    }
  };
  xhrStat.onerror = function () {
    console.error('Error fetching random stat.');
  };
  xhrStat.send();
}

function handleSubmit(event) {
  var submitButton = event.target;
  if (submitButton.disabled) return;
  submitButton.disabled = true;

  var playerNameInput = submitButton.parentElement.parentElement.children[0].children[0];
  var playerName = playerNameInput.value.trim();

  if (playerName !== '') {
    // The rest of the code for submitting the player remains unchanged
  }
}

function addPlayerRows() {
  // The code for adding player rows remains unchanged
}

function updateTotalScore() {
  // The code for updating total score remains unchanged
}

function autocomplete(input) {
  // The code for autocomplete remains unchanged
}

function triggerModal() {
  // The code for triggering modal remains unchanged
}

window.onload = function() {
  updateLabels();
  addPlayerRows();
  triggerModal();
  
  setInterval(updateLabels, 259200000); // Update labels every 72 hours
};
</script>

</body>
</html>


