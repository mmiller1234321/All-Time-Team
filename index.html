<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Randomly Labeled Table</title>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    background-color: #71A95A; /* Green like Wrigley Field grass */
    font-family: Arial, sans-serif;
  }
  .container {
    margin-top: 20px;
    background-color: #FAFAD2; /* Sand color */
    padding: 20px;
    border-radius: 10px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background-color: #FAFAD2; /* Sand color */
  }
  th, td {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
  }
  th {
    background-color: #f2f2f2; /* Light gray header */
  }
  .stat-square {
    width: 30px;
    height: 30px;
    background-color: #ffffff; /* White square */
    border: 1px solid #dddddd;
  }
</style>
</head>
<body>

<div class="container">
  <h2>All Time Teams</h2>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th id="teamLabel"></th>
        <th>Position</th>
        <th id="statLabel">Stat</th> <!-- New column for Stat -->
        <th>Submit Player</th> <!-- New column for submit button -->
      </tr>
    </thead>
    <tbody id="playerRows">
      <!-- Table rows will be generated dynamically -->
    </tbody>
  </table>
</div>

<script>
// Function to update MLB team name label and Stat label dynamically once a day
function updateLabels() {
  var teams = [
    "Arizona Diamondbacks", "Atlanta Braves", "Baltimore Orioles", "Boston Red Sox",
    "Chicago White Sox", "Chicago Cubs", "Cincinnati Reds", "Cleveland Guardians",
    "Colorado Rockies", "Detroit Tigers", "Houston Astros", "Kansas City Royals",
    "Los Angeles Angels", "Los Angeles Dodgers", "Miami Marlins", "Milwaukee Brewers",
    "Minnesota Twins", "New York Yankees", "New York Mets", "Oakland Athletics",
    "Philadelphia Phillies", "Pittsburgh Pirates", "San Diego Padres", "San Francisco Giants",
    "Seattle Mariners", "St. Louis Cardinals", "Tampa Bay Rays", "Texas Rangers",
    "Toronto Blue Jays", "Washington Nationals"
  ];
  var randomTeamIndex = Math.floor(Math.random() * teams.length);
  var randomTeam = teams[randomTeamIndex];
  document.getElementById('teamLabel').innerText = randomTeam;

  var stats = ["hits", "runs", "rbi", "stolen bases", "triples", "walks", "errors", "total bases", "home runs"];
  var randomStatIndex = Math.floor(Math.random() * stats.length);
  var randomStat = stats[randomStatIndex];
  document.getElementById('statLabel').innerText = randomStat;
}

// Function to handle the submission of player names and fetch highest home runs
function handleSubmit(event) {
  var playerName = event.target.parentElement.parentElement.children[0].children[0].value;
  var position = event.target.parentElement.parentElement.children[1].textContent;
  var team = document.getElementById('teamLabel').textContent;

  // Make AJAX request to backend to fetch highest home runs for the player
  var xhr = new XMLHttpRequest();
  xhr.open('GET', '/search?playerName=' + playerName + '&position=' + position + '&team=' + team, true);
  xhr.onload = function () {
    if (xhr.status === 200) {
      var statSquare = event.target.parentElement.parentElement.children[2].children[0];
      statSquare.textContent = xhr.responseText;
    } else {
      console.error('Error fetching data:', xhr.statusText);
    }
  };
  xhr.onerror = function () {
    console.error('Error fetching data.');
  };
  xhr.send();
}

// Function to add rows with input fields for player names, positions, and blank squares for stats
function addPlayerRows() {
  var positions = ["C", "1B", "2B", "3B", "SS", "LF", "CF", "RF", "P", "DH"];
  var tbody = document.getElementById("playerRows");
  for (var i = 0; i < 10; i++) {
    var row = document.createElement("tr");
    
    // Player name input cell
    var playerNameCell = document.createElement("td");
    var playerNameInput = document.createElement("input");
    playerNameInput.type = "text";
    playerNameInput.className = "form-control";
    playerNameInput.placeholder = "Enter player's name";
    playerNameCell.appendChild(playerNameInput);
    row.appendChild(playerNameCell);
    
    // Position cell
    var positionCell = document.createElement("td");
    positionCell.textContent = positions[i];
    row.appendChild(positionCell);
    
    // Stat blank square cell
    var statCell = document.createElement("td");
    var statSquare = document.createElement("div");
    statSquare.className = "stat-square";
    statCell.appendChild(statSquare);
    row.appendChild(statCell);
    
    // Submit button cell
    var submitCell = document.createElement("td");
    var submitButton = document.createElement("button");
    submitButton.type = "button";
    submitButton.className = "btn btn-primary";
    submitButton.textContent = "Submit";
    submitButton.addEventListener('click', handleSubmit);
    submitCell.appendChild(submitButton);
    row.appendChild(submitCell);
    
    tbody.appendChild(row);
  }
}

// Call the functions to update the label and add rows when the page loads
window.onload = function() {
  updateLabels();
  addPlayerRows();
};
</script>

</body>
</html>
